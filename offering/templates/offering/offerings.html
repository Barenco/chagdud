{% extends 'khadro_ling/base.html' %}
{% load static i18n %}

{% block head %}
<title>Oferendas | Khadro Ling</title>
{% endblock %}

{% block body %}
<div class="bannerSobre pt-5" style="background-image: url({% static 'institution/images/banner_red.jpg' %})">
  <div class="container">
    <div class="logo row justify-content-center">
      <div class="col-md-12 col-sm-12 mt-5 pt-1 text-center">

        <h1 class="mb-5 titulo text-white">Oferendas</h1>
      </div>
    </div>
  </div>
</div>

<main>
  {% if mail_sended %}
  <p class="successMessage">Sua oferenda foi enviada.</p>
  {% endif %}
  <div class="sobre">
    <div class="container">
      <div class=" row justify-content-center mb-5">
        <div class="col-md-10 col-sm-12 text-justify">
          <p>
            Fazer oferendas é uma maneira de cultivar as qualidades de generosidade 
            que gera contentamento, bem-estar, abundância e um caminho profundamente 
            transformador. Cada uma das oferendas realizadas no Khadro Ling é acompanhada 
            de uma prática de meditação especial que a incrementa.
          </p>
          <br>
          <p>
            <strong>Para realizar sua oferenda, utilize o formulário genérico com todas as opções de oferendas do Khadro Ling.</strong>
          </p>
        </div>
        </div>

      <div id="oferendas" class="row">  
          <div class="mb-5 col-md-10 offset-md-1 offset-sm-0 col-sm-12 justify-content-center">
            <nav>
              <div class="nav nav-tabs justify-content-center offering-nav-link" id="nav-tab" role="tablist">
                <a class="nav-item navOferendas nav-link active offering-nav-link" id="nav-tsog-tab" data-toggle="tab" href="#nav-tsog" role="tab" aria-controls="nav-contact" aria-selected="true">Tsog</a>
                <a class="nav-item navOferendas nav-link offering-nav-link" id="nav-lamp-tab" data-toggle="tab" href="#nav-lamparinas" role="tab" aria-controls="nav-profile" aria-selected="false">Lamparinas</a>
                <a class="nav-item navOferendas nav-link offering-nav-link" id="nav-riwo-tab" data-toggle="tab" href="#nav-riwo" role="tab" aria-controls="nav-contact" aria-selected="false">Riwo Sangtchö</a>
                <a class="nav-item navOferendas nav-link offering-nav-link" id="nav-flag-tab" data-toggle="tab" href="#nav-bandeiras" role="tab" aria-controls="nav-contact" aria-selected="false">Bandeiras</a>
                <a class="nav-item navOferendas nav-link" id="nav-akshobia-tab" data-toggle="tab" href="#nav-akshobia" role="tab" aria-controls="nav-contact" aria-selected="false">Akshobia</a>
                <a class="nav-item navOferendas nav-link offering-nav-link" id="nav-cerimonial-tab" data-toggle="tab" href="#nav-cerimoniais" role="tab" aria-controls="nav-contact" aria-selected="false">Cerimoniais</a>
                <a class="nav-item navOferendas nav-link offering-nav-link" id="nav-donation-tab" data-toggle="tab" href="#nav-doacoes" role="tab" aria-controls="nav-contact" aria-selected="false">Doações</a>

              </div>
            </nav>
            <div class="tab-content oferendaTab" id="nav-tabContent">

              <!-- TSOG -->

              <div class="tab-pane fade show active" id="nav-tsog" role="tabpanel" aria-labelledby="nav-home-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda" src="{% static 'khadro_ling/images/Tsog.jpeg' %}">
                  </div>
                  <div class="my-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo"> {% trans "offerings.tsog-title" %}</h4>
                    <b class="mb-2"></b>

                    <div class="mt-3"> 
                      <p>
                        {% trans "offerings.tsog-description-p1" %}
                      </p>

                      <p>
                        {% trans "offerings.tsog-description-p2" %}

                      </p>

                      <h5 class="text-dark"><strong>{% trans "offerings.attention" %}</strong></h5>
                      <p>
                        <strong>{% trans "offerings.tsog-attention-text" %}</strong>
                      </p>

                    </div>
                  </div>
                </div>
              </div>

              <!-- LAMPS -->

              <div class="tab-pane fade" id="nav-lamparinas" role="tabpanel" aria-labelledby="nav-profile-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda" src="{% static 'khadro_ling/images/lamparina.jpg' %}">
                  </div>
                  <div class="my-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo"> {% trans "offerings.lamps-title" %}</h4>
                    <b class="mb-2"></b>

                    <div class="mt-3"> 
                      <p>
                        {% trans "offerings.lamps-description-p1" %}
                      </p>

                      <p>
                        {% trans "offerings.lamps-description-p2" %}
                      </p>

                      <h5 class="text-dark"><strong>{% trans "offerings.attention" %}</strong></h5>
                      <p>
                        <strong>{% trans "offerings.lamps-attention-text-p1" %}</strong>
                      </p>

                      <p>
                        <strong>{% trans "offerings.lamps-attention-text-p2" %}</strong>
                      </p>

                    </div>
                  </div>
                </div>
              </div>

              <!-- RIWO SANGTCHÖ -->

              <div class="tab-pane fade" id="nav-riwo" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row">
                  <div class="col-md-6 col-sm-12 my-5">
                    <img class="imgOferenda2" src="{% static 'khadro_ling/images/riwo.jpg' %}">
                  </div>
                  <div class="mt-5 col-md-6 col-sm-12 justify-content-center">
                    <h4 class="titulo"> {% trans "offerings.riwo.title" %}</h4>
                    <b class="mb-2"></b>

                    <div class="mt-3"> 
                      <p>
                        {% trans "offerings.riwo.description.p1" %}
                      </p>

                      <p>
                        {% trans "offerings.riwo.description.p2" %}
                      </p>

                      <p>
                        {% trans "offerings.riwo.description.p3" %}
                      </p>

                      <p>
                        {% trans "offerings.riwo.description.p4" %}
                      </p>
                    </div>
                  </div>
                  <div>
                    <p>
                      {% trans "offerings.riwo.description.p5" %}
                    </p>

                    <h5 class="text-dark"><strong>{% trans "offerings.attention" %}</strong></h5>
                    <p>
                      <strong>{% trans "offerings.riwo.attention-text" %}</strong>
                    </p>
                  </div>
                </div>
              </div>

              <!-- BANDEIRAS -->

              <div class="tab-pane fade" id="nav-bandeiras" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda" src="{% static 'khadro_ling/images/bandeira.jpg' %}">
                  </div>
                  <div class="mt-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo"> Oferenda de Bandeiras de Oração </h4>
                    <b class="mb-2"></b>
                    
                    <div class="mt-3"> 
                      <p>
                        As novas bandeiras de oração no Templo Budista <br>
                          Três Coroas – RS
                      </p>

                      <p>
                        Ao longo dos séculos, bandeiras de oração coloridas tremularam sobre as 
                        montanhas e monastérios do Tibete e nos Himalaias, com o vento soprando 
                        seus mantras e desejos auspiciosos para o mundo inteiro. Nossas bandeiras, 
                        no Templo Budista Chagdud Gonpa Khadro Ling, são especificamente impressas 
                        com o mantra da longevidade de Amitayus, o Buda que protege da morte 
                        extemporânea e da doença, e aumenta a prosperidade e o bem-estar. 
                        Neste ano, foram utilizadas cinco cores na mandala (um arranjo sagrado) 
                        das bandeiras de oração. Neste contexto, as cores têm as seguintes representações:
                      </p>

                      <p>
                        <i class="fa fa-flag text-primary" aria-hidden="true"></i> 
                        A cor azul representa o elemento água e a atividade da paz.
                      </p>
                      <p>
                        <i class="fa fa-flag text-warning" aria-hidden="true"></i> 
                        A cor amarela representa o elemento terra e a atividade de incrementar todas as qualidades positivas.
                      </p>
                      <p>
                        <i class="fa fa-flag text-danger" aria-hidden="true"></i> 
                        A cor vermelha representa o elemento fogo e a atividade de magnetização por meio do amor e da compaixão.
                      </p>
                      <p>
                        <i class="fa fa-flag text-sucess" aria-hidden="true"></i> 
                        A cor verde representa o elemento vento e a atividade de subjugar a negatividade.
                      </p>
                      <p> <i class="fa fa-flag text-light" aria-hidden="true"></i>
                        A cor branca, do estandarte da vitória localizado no alto das bandeiras, representa o elemento espaço 
                        e a atividade iluminada.
                      </p>

                    </div>
                  </div>
                  <div>
                    <p>
                      As bandeiras são patrocinadas pelos visitantes do Templo Budista. 
                      Os patrocinadores escrevem dedicações pessoais e aspirações, que são 
                      lidas em voz alta quando as bandeiras novas substituem as 
                      antigas, que ficaram rasgadas e desvanecidas ao terem enviado seus mantras com o vento.
                    </p>

                    <p>
                      Toda vez que um conjunto específico de bandeiras é adquirido por um visitante ou 
                      praticante na loja Dakini Arts, em Três Coroas, uma parte do valor da compra é 
                      destinada às bandeiras da mandala que fica no Templo Budista. Desta forma, 
                      gera-se uma interdependência expansível de auspiciosidade.
                    </p>

                    <p>Que todos os seres possam se beneficiar!</p>
                  </div>
                </div>    
              </div>

              <!-- AKSHOBIA -->

              <div class="tab-pane fade" id="nav-akshobia" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda2" src="{% static 'khadro_ling/images/akshobia.jpg' %}">
                  </div>
                  <div class="mt-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo">{% trans "offerings.akshobia.title" %}</h4>
                    <b class="mb-2"></b>
                    
                    <div class="mt-3"> 
                      <p>
                        {% trans "offerings.akshobia.description.p1" %}
                      </p>

                      <div class="accordion" id="accordionExample2">
                        <div class="card">
                          <div class="card-header" id="headingOne">
                            <h2 class="mb-0">
                              <button class="btn btn-link btn-block text-left text-black-50 type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                                {% trans "offerings.akshobia.intention.title" %}
                              </button>
                            </h2>
                          </div>

                          <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample2">
                            <div class="card-body">
                              <p>
                                {% trans "offerings.akshobia.intention.text.p1" %}
                              </p>
                              <p>
                                {% trans "offerings.akshobia.intention.text.p2" %}
                              </p>
                              <p>
                                {% trans "offerings.akshobia.intention.text.p3" %}
                              </p>
                            </div>
                          </div>
                        </div>
                      <div class="card">
                        <div class="card-header" id="headingTwo">
                          <h2 class="mb-0">
                            <button class="btn btn-link btn-block text-left text-black-50 collapsed" type="button" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              {% trans "offerings.akshobia.when-sponsor.title" %}
                            </button>
                          </h2>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample2">
                          <div class="card-body">
                            <p>
                              {% trans "offerings.akshobia.when-sponsor.text.p1" %}
                            </p>

                            <p>
                              {% trans "offerings.akshobia.when-sponsor.text.p2" %}
                            </p>

                            <p>
                              {% trans "offerings.akshobia.when-sponsor.text.p3" %}
                            </p>

                            <p>
                              {% trans "offerings.akshobia.when-sponsor.text.p4" %}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="card">
                        <div class="card-header" id="headingThree">
                          <h2 class="mb-0">
                            <button class="btn btn-link btn-block text-left text-black-50 collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                              {% trans "offerings.akshobia.how-it-works.title" %}
                            </button>
                          </h2>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample2">
                          <div class="card-body">
                            <p>{% trans "offerings.akshobia.how-it-works.text.p1" %}</p>

                            <p>
                              {% trans "offerings.akshobia.how-it-works.text.p2" %}
                            </p>

                            <p>
                              {% trans "offerings.akshobia.how-it-works.text.p3" %}
                            </p>

                            <p>
                              {% trans "offerings.akshobia.how-it-works.text.p4" %}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="card">
                        <div class="card-header" id="headingFour">
                          <h2 class="mb-0">
                            <button class="btn btn-link btn-block text-left text-black-50 collapsed" type="button" data-toggle="collapse" data-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                              {% trans "offerings.akshobia.arrive-in-brazil-title" %}
                            </button>
                          </h2>
                        </div>
                        <div id="collapseFour" class="collapse" aria-labelledby="headingFour" data-parent="#accordionExample2">
                          <div class="card-body">
                            <p>
                              {% trans "offerings.akshobia.arrive-in-brazil-text" %}
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="card">
                        <div class="card-header" id="headingFive">
                          <h2 class="mb-0">
                            <button class="btn btn-link btn-block text-left text-black-50 collapsed" type="button" data-toggle="collapse" data-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                              {% trans "offerings.akshobia.tibet-sponsor.title" %}
                            </button>
                          </h2>
                        </div>
                        <div id="collapseFive" class="collapse" aria-labelledby="headingFive" data-parent="#accordionExample2">
                          <div class="card-body">
                            <p>
                              {% trans "offerings.akshobia.tibet-sponsor.text" %}
                              <a href="http://mahakaruna.org">http://mahakaruna.org</a>.
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>                    
                  </div>
                </div>
                  <div>
                    <p>{% trans "offerings.akshobia.description.p2" %}</p>
                    <p>
                      <i>{% trans "offerings.akshobia.description.p3" %}</i>
                    </p>
                   </div>
                </div>
              </div>

              <!-- CERIMONIALS -->

              <div class="tab-pane fade" id="nav-cerimoniais" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda" src="{% static 'khadro_ling/images/cerimoniais.jpg' %}">
                  </div>
                  <div class="mt-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo"> Oferendas Cerimoniais </h4>
                    <b class="mb-2"></b>

                    <div class="mt-3"> 
                      <p>Você pode oferecer qualquer valor. Sua oferenda será feita após a confirmação 
                        do depósito.</p>
  
                      <h5 class="text-dark"><strong>Atenção</strong></h5>
                      <p>
                        <strong>As oferendas são reunidas sempre às 14h do dia que antecede a 
                        data do Tsog para que possam ser organizadas e lidas na respectiva data. 
                        Após este horário, a oferenda será lida no próximo Tsog conforme o 
                        calendário do Khadro Ling.</strong>
                      </p>
                    </div>
                  </div>
                </div>
              </div>

              <!-- DONATIONS -->

              <div class="tab-pane fade" id="nav-doacoes" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row">
                  <div class="col-md-4 col-sm-12 my-5">
                    <img class="imgOferenda" src="{% static 'khadro_ling/images/doacoes.jpg' %}">
                  </div>
                  <div class="mt-5 col-md-8 col-sm-12 justify-content-center">
                    <h4 class="titulo">{% trans "offerings.donations.title" %} </h4>
                    <b class="mb-2"></b>

                    <div class="mt-3"> 
                      <p>
                        {% trans "offerings.donations.title" %}
                      </p>
  
                      <h5 class="text-dark"><strong>{% trans "offerings.attention" %}</strong></h5>
                      <p>
                        <strong>{% trans "offerings.donations-attention-text" %}</strong>
                      </p>
                    </div>
                  </div>
                <div>

              </div>
            </div>
          </div>

          <!-- GENERAL FORM -->

          <div class="card-body py-5">
            <form action="/khadroling/oferendas/" method="post" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="form-group">
                <label for="nome">{% trans "offerings.form.name" %}</label>
                {{ form.name }}
              </div>
              <div class="form-group">
                <label for="email">{% trans "offerings.form.email" %}</label>
                {{ form.email }}
              </div>
              <div class="form-group">
                <label for="valor">{% trans "offerings.form.total-value" %}</label>
                {{ form.offering_value }}
              </div>
              <h5 class="mt-5"><strong>{% trans "offerings.form.offering-destination" %}</strong></h5>
              <hr>
              <p>
                {% trans "offerings.form.offering-destination.text.p1" %} <br>
                {% trans "offerings.form.offering-destination.text.p2" %}
              </p>

              <div class="form-group">
                <label for="crescent_moon_tara_tsog">{% trans "offerings.form.crescent-moon-tara-tsog" %}</label>
                {{ form.crescent_moon_tara_tsog }}
              </div>

              <div class="form-group">
                <label for="guru_tsog">{% trans "offerings.form.guru-tsog" %}</label>
                {{ form.guru_tsog }}
              </div>

              <div class="form-group">
                <label for="waning_moon_tara_tsog">{% trans "offerings.form.waning-moon-tara-tsog" %}</label>
                {{ form.waning_moon_tara_tsog }}
              </div>

              <div class="form-group">
                <label for="dakini_tsog">{% trans "offerings.form.dakini-tsog" %}</label>
                {{ form.dakini_tsog }}
              </div>

              <div class="form-group">
                <label for="riwo_sangcho">{% trans "offerings.form.riwo-sangcho-tsog" %}</label>
                {{ form.riwo_sangcho }}
              </div>

              <div class="form-group">
                <label for="general_temple_activities">{% trans "offerings.form.general-activities" %}</label>
                {{ form.general_temple_activities }}
              </div>

              <div class="form-group">
                <label for="lamps_quantity">{% trans "offerings.form.lamps_quantity" %}</label>
                {{ form.lamps_quantity }}
              </div>

              <div class="form-group">
                <label for="lamps_quantity_by_day">{% trans "offerings.form.lamps_quantity_by_day" %}</label>
                {{ form.lamps_quantity_by_day }}
              </div>

              <div class="form-group">
                <label for="prayer_flags">{% trans "offerings.form.prayer-flag" %}</label>
                {{ form.prayer_flags }}
              </div>

              <div class="form-group total-value">
                <label for="prayer_flags">{% trans "offerings.form.total" %}</label>
                R$ <span id="total-offered">0</span>
              </div>

              <div class="form-group">
                <label for="dedicacao">{% trans "offerings.form.dedication" %}</label>
                {{ form.dedication }}
              </div>

              {% if user_language == 'pt' %}
              
              <h5 class="mt-5"><strong>Dados para depósito</strong></h5>
              <hr>
              <p>
                Banco do Brasil<br>
                Titular: Chagdud Gonpa Brasil<br>
                CNPJ: 00.990.708/0001-37<br>
                Agência: 1380-3<br>
                Conta: 3583-1<br>
                Chave PIX: oferendas@templobudista.org
              </p>

              <div class="form-group">
                <label for="data">Valor do Depósito</label>
                {{ form.deposit_value }}
              </div>

              <div class="form-group">
                <label for="data">Data do Depósito</label>
                {{ form.deposit_date }}
              </div>

              <div class="form-group mt-5">
                <label for="comprovante">Envie o comprovante</label>
                {{ form.deposit_receipt }}
              </div>

              <button name='general-form' type="submit" class="btn btn-primary mt-3">Enviar</button>

              {% else %}
                <button id="submit-btn-international" type="submit" name='general-form'>
                  <img src="{% static 'khadro_ling/images/paypal.png' %}" style="width: 150px; height: 100px;" alt="paypal logo">
                </button>
                <div id="paypal-container" class="mt-3">
                  <small>Você será redirecionado para uma outra página.</small>
                </div>
              {% endif %}
            </form>

            <div id="akshobia-message" class="hidden">
              <hr>
              <p class="font-large">
                <!-- A prática de Akshobia no Khadro Ling não está ocorrendo atualmente. 
                Para realizar o patrocínio, por favor, entre em contato com a 
                <a class="styled-link" href="http://mahakaruna.org/">Fundação Mahakaruna</a> , nos Estados Unidos. -->
                {% trans "offerings.akshobia.unavailable-warning.p1" %}
              </p>
              <p class="font-large">
                {% trans "offerings.akshobia.unavailable-warning.p2" %}
              </p>
              <hr>
            </div>

          </div>     
        </div>
      </div>
    </div>
  </div>
</main>

<script>
  const akshobiaLink = document.getElementById("nav-akshobia-tab");
  var otherOfferingLinkList = document.getElementsByClassName("offering-nav-link");

  const akshobiaMessage = document.getElementById("akshobia-message");
  const form = document.getElementsByTagName("form")[0];

  akshobiaLink.onclick = function(){
    akshobiaMessage.style.display = 'inline';
    form.style.display = 'none';
  }

  for (var i=1; i < otherOfferingLinkList.length; i++) {
    otherOfferingLinkList[i].onclick = function(){
      akshobiaMessage.style.display = 'none';
      form.style.display = 'inline';
    }
  }



  // Changing total offered

  const formsNames = [
    'crescent_moon_tara_tsog',
    'guru_tsog',
    'waning_moon_tara_tsog',
    'dakini_tsog',
    'riwo_sangcho',
    'general_temple_activities',
    'lamps_quantity',
    'prayer_flags',
  ]

  const totalOffered = document.getElementById("total-offered")

  for (i = 0; i < formsNames.length; i++) {
    document.getElementById(formsNames[i]).addEventListener("change", changeTotal);
  }

  function changeTotal() {
    setTimeout(function () {
      total = 0
      for (i = 0; i < formsNames.length; i++) {
        let formValue = parseFloat(document.getElementById(formsNames[i]).value)

        if (formsNames[i] === 'lamps_quantity') {
          formValue *= 3
        }

        if (formsNames[i] === 'prayer_flags') {
          formValue *= 15
        }

        if (formValue) {
          total += formValue
        }
      }

      // const value = parseInt(totalOffered.innerHTML) + parseInt(crescent_moon_tara_tsog.value);
      totalOffered.innerHTML = total;
    }, 100)
  }



  // International button
  var buttonInternational = document.getElementById("submit-btn-international")

  buttonInternational.onclick = function(){
    var form = document.getElementsByTagName("form")[0]
    var isValidForm = form.checkValidity();
    if (isValidForm){
      window.open('https://www.paypal.com/br/home','_blank');
    };
  };


</script>
{% endblock %}
